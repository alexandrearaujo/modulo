<!DOCTYPE html>
<html lang="pt-BR"
 xmlns:th="http://www.thymeleaf.org"
 xmlns:data="https://github.com/mxab/thymeleaf-extras-data-attribute"
 class="no-js">
<meta charset="UTF-8"/>
<body>
	<!-- Alerts -->
	<div th:fragment="alerts" class='alerts'>
		<div th:if="${info != null}">
			<script th:inline="javascript">
				$(function(){
					$.notify({
						message: [[${info}]],
						url: [[${urlScreen}]],
					},{
						delay: 4000,
						type: 'info'
					});
				});
			</script>
		</div>
	
		<div th:if="${success != null}">
			<script th:inline="javascript">
				$(function(){
					$.notify({
						message: [[${success}]],
						url: [[${urlScreen}]],
					},{
						delay: 4000,
						type: 'success'
					});
				});
			</script>
		</div>
		
		<div th:if="${danger != null}">
			<script th:inline="javascript">
				$(function(){
					$.notify({
						message: [[${danger}]],
						url: [[${urlScreen}]],
					},{
						delay: 3000,
						type: 'danger'
					});
				});
			</script>
		</div>
		
		<div th:if="${error != null}">
			<script th:inline="javascript">
				$(function(){
					$.notify({
						message: [[${error}]],
						url: [[${urlScreen}]],
					},{
						delay: 3000,
						type: 'danger'
					});
				});
			</script>
		</div>
	</div>
       
       
	<th:block th:fragment="confirmation">
		<span data:original-title="${tooltip} != null ? #{${tooltip}} : ''" data:toggle="tooltip">
			<a class="btn btn-default confirmation-callback" type="button" th:id="${idField}"
				data-btn-ok-icon="glyphicon glyphicon-share-alt"
				data-btn-ok-class="btn-success"
				data-btn-cancel-icon="glyphicon glyphicon-ban-circle"
				data-btn-cancel-class="btn-danger"
				data:id="${idEntity}"
				data:title="#{${title}}"
				data:btn-ok-label="#{labelOk}"
				data:btn-cancel-label="#{labelCancel}"
				data:placement="${placement}"
				data:singleton="${singleton}"
				data:popout="${popout}"
				th:onclick="${onclick}"
				th:disabled="${disabled}">
				<th:block th:switch="${type}">
				  <p th:case="null"><i class="fa fa-trash mv-color-green"></i></p>
				  <p th:case="cancel"><i class="fa fa-ban mv-color-green"></i></p>
				  <p th:case="end"><i class="fa fa-times-circle mv-color-green"></i></p>
				</th:block>
			</a>
		</span>
		
		<script th:inline="javascript">
		/*<![CDATA[*/
            $(function() {
            	$('#'+[[${idField}]]).confirmation({
            		onConfirm: function() { 
            			var idToExclude = $(this).attr('data-id');
    					var url = [[${method}]] + '?id='+idToExclude;
    					
    					if ([[${defaultFunction}]] == true) {
	    					window.location=url; 
    					} else if ([[${ajaxFunction}]] == true) {
    						$.ajax({
    							url: url,
    							async: false,
    							success: function(result) {
    								$.alertSuccess([[#{ctrl.message.success.save}]]);
    								if (result.status) {
   										var rowCount = $('tbody#tbody_list tr').length;
   										
   										if (rowCount > 1) {
   											$(button).parent().parent().remove();
   										} else {
   											var idButtonSearch = [[${idButtonSearch}]];    											
   											$('#' + idButtonSearch).click();
   										}
   									}
    							}
    						});
    					}
						if ([[${funcao}]] != null) {
    						var f = new Function([[${funcao}]].replace('()', '('+this.attr("data-id")+')'));
    						f.call();
    					}
           			}
            	});
            });
		/*]]>*/
		</script>
	</th:block>
</body>
</html>